@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-dark-900;
    color: white;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Light theme: refined with softer colors and proper border radius handling */
  .theme-light body {
    background-color: #f0f9ff; /* Nhẹ nhàng hơn so với màu trắng nguyên bản */
    color: #1e3a8a; /* Màu chữ xanh đậm dễ đọc hơn */
  }
}

@layer components {
  /* App chrome */
  .app-header {
    @apply bg-dark-800/80 backdrop-blur-md border-b border-dark-700/70;
  }

  .theme-light .app-header {
    border-color: rgba(14, 165, 233, 0.3);
    border-bottom-color: rgba(14, 165, 233, 0.3);
    background-color: rgb(255, 255, 255);
    backdrop-filter: blur(12px);
    box-shadow: 0 2px 8px rgba(14, 165, 233, 0.15);
  }

  .app-accent-bar {
    background: rgba(14, 165, 233, 0.3) !important;
    height: 2px !important;
    opacity: 1 !important;
    box-shadow: 0 2px 4px rgba(14, 165, 233, 0.2) !important;
  }
  
  .theme-light .app-accent-bar {
    background: rgba(14, 165, 233, 0.3) !important;
    height: 2px !important; /* Tăng độ dày lên 2px */
    opacity: 1 !important; /* Bỏ mờ để rõ nét hơn */
    box-shadow: 0 2px 4px rgba(14, 165, 233, 0.2) !important;
  }

  /* Force override for app-accent-bar - more specific selector */
  .theme-light .app-accent-bar,
  .app-accent-bar {
    background: rgba(14, 165, 233, 0.3) !important;
    height: 2px !important;
    opacity: 1 !important;
    box-shadow: 0 2px 4px rgba(14, 165, 233, 0.2) !important;
  }

  .sidebar {
    @apply bg-dark-800/70 backdrop-blur-md border-r border-dark-700/70;
  }
  .theme-light .sidebar {
    border-color: rgba(14, 165, 233, 0.3);
    border-right-color: rgba(14, 165, 233, 0.3);
    background-color: rgb(255, 255, 255);
    backdrop-filter: blur(16px);
    box-shadow: 2px 0 12px rgba(14, 165, 233, 0.1);
  }

  .content-surface {
    @apply bg-dark-900/60 backdrop-blur-sm;
  }
  .theme-light .content-surface {
    background-color: rgb(255, 255, 255);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(14, 165, 233, 0.3);
    box-shadow: 0 4px 20px rgba(14, 165, 233, 0.12);
  }

  /* Đảm bảo background được áp dụng cho toàn bộ component có border-radius */
  .theme-light .rounded-lg, 
  .theme-light .rounded-xl, 
  .theme-light .rounded-2xl,
  .theme-light .rounded-3xl,
  .theme-light .rounded-full {
    overflow: hidden; /* Đảm bảo không lộ background khi bo cong */
  }

  .terminal-container {
    @apply bg-dark-900 font-mono;
    color: #4ade80; /* green-400 */
  }
  
  .theme-light .terminal-container {
    background-color: #f8fafc; /* Nền sáng hơn */
    color: #059669; /* Xanh lá đậm hơn cho text terminal */
    border: 1px solid #e2e8f0;
  }
  
  .terminal-cursor {
    @apply bg-green-400;
    color: #0f172a; /* dark-900 */
    animation: blink 1s infinite;
  }
  
  .theme-light .terminal-cursor {
    @apply bg-green-600;
    color: white;
  }
  
  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  
  .glass-effect {
    @apply backdrop-blur-md bg-white/10 border border-white/20;
  }
  
  .theme-light .glass-effect {
    @apply backdrop-blur-md bg-white/60 border border-blue-100/50;
    box-shadow: 0 8px 32px rgba(59, 130, 246, 0.1);
  }
  
  .glass-effect-dark {
    @apply backdrop-blur-md bg-dark-800/50 border border-dark-600/50;
  }
  
  .theme-light .glass-effect-dark {
    @apply backdrop-blur-md bg-blue-50/80 border border-blue-200/40;
  }
  
  .gradient-primary {
    @apply bg-gradient-to-r from-primary-500 to-primary-700;
  }
  
  .theme-light .gradient-primary {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  }
  
  .gradient-secondary {
    @apply bg-gradient-to-r from-dark-600 to-dark-800;
  }
  
  .theme-light .gradient-secondary {
    background: linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%);
  }
  
  .shadow-glow {
    box-shadow: 0 0 20px rgba(14, 165, 233, 0.3);
  }
  
  .theme-light .shadow-glow {
    box-shadow: 0 0 16px rgba(59, 130, 246, 0.2);
  }
  
  .shadow-glow-green {
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
  }
  
  .theme-light .shadow-glow-green {
    box-shadow: 0 0 16px rgba(16, 185, 129, 0.2);
  }
}

/* Make dark text utilities render bright in light theme */
.theme-light .text-white { 
  color: #1e3a8a !important; /* blue-900 */
}
.theme-light .text-gray-100,
.theme-light .text-gray-200,
.theme-light .text-gray-300,
.theme-light .text-gray-400,
.theme-light .text-gray-500 { 
  color: #2563eb !important; /* blue-600 */
}

/* Override all border colors in light theme */
.theme-light .border-dark-700\/70,
.theme-light .border-slate-700,
.theme-light .border-slate-200 {
  border-color: rgba(14, 165, 233, 0.3) !important;
}

/* Override specific border directions */
.theme-light .border-b-dark-700\/70,
.theme-light .border-r-dark-700\/70,
.theme-light .border-t-dark-700\/70,
.theme-light .border-l-dark-700\/70 {
  border-color: rgba(14, 165, 233, 0.3) !important;
}

.theme-light .border-b-slate-700,
.theme-light .border-r-slate-700,
.theme-light .border-t-slate-700,
.theme-light .border-l-slate-700 {
  border-color: rgba(14, 165, 233, 0.3) !important;
}

.theme-light .border-b-slate-200,
.theme-light .border-r-slate-200,
.theme-light .border-t-slate-200,
.theme-light .border-l-slate-200 {
  border-color: rgba(14, 165, 233, 0.3) !important;
}

/* Override border-t for dark theme colors in light theme */
.theme-light .border-t-dark-700 {
  border-top-color: rgba(14, 165, 233, 0.3) !important;
}

/* Custom separator line class */
.separator-line {
  border-top-color: rgba(14, 165, 233, 0.3) !important;
  border-bottom-color: rgba(14, 165, 233, 0.3) !important;
}

.theme-light .separator-line {
  border-top-color: rgba(14, 165, 233, 0.3) !important;
  border-bottom-color: rgba(14, 165, 233, 0.3) !important;
}
/* Exceptions: keep button text white in light theme */
.theme-light .btn-primary,
.theme-light .btn-primary *,
.theme-light .nav-item-active,
.theme-light .nav-item-active *,
.theme-light .btn-danger,
.theme-light .btn-success { color: #ffffff !important; }

/* Ensure active sidebar item has vibrant blue background in light theme */
.theme-light .nav-item-active { 
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important; 
  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3) !important; 
  border: 1px solid rgba(14, 165, 233, 0.5) !important;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px; /* Nhỏ hơn để trông thanh lịch hơn */
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-dark-800;
}
.theme-light ::-webkit-scrollbar-track {
  @apply bg-blue-50;
}

::-webkit-scrollbar-thumb {
  @apply bg-dark-600 rounded-full;
}
.theme-light ::-webkit-scrollbar-thumb {
  @apply bg-blue-200;
  min-height: 14px; /* ensure full circle shows */
  min-width: 14px;
  border: 3px solid rgba(0,0,0,0); /* space to avoid clipping */
  background-clip: padding-box; /* keep circle visible */
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-dark-500;
}
.theme-light ::-webkit-scrollbar-thumb:hover {
  @apply bg-blue-300;
}

/* Range (slider) - ensure full circular thumb and proper track */
input[type='range'] {
  -webkit-appearance: none;
  appearance: none;
  height: 28px; /* extra vertical room so thumb is not clipped */
  background: transparent;
}

/* WebKit track */
input[type='range']::-webkit-slider-runnable-track {
  height: 8px;
  background: #334155; /* dark track */
  border-radius: 9999px;
}
.theme-light input[type='range']::-webkit-slider-runnable-track {
  background: #bfdbfe; /* blue-200 */
}

/* WebKit thumb */
input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 9999px;
  background: #0ea5e9; /* sky-500 */
  border: 3px solid #ffffff; /* ring */
  margin-top: -5px; /* center on 8px track */
  box-shadow: 0 1px 3px rgba(0,0,0,0.25);
}
.theme-light input[type='range']::-webkit-slider-thumb {
  background: #2563eb; /* blue-600 */
  border-color: #ffffff;
}

/* Firefox track */
input[type='range']::-moz-range-track {
  height: 8px;
  background: #334155;
  border: none;
  border-radius: 9999px;
}
.theme-light input[type='range']::-moz-range-track {
  background: #bfdbfe;
}

/* Firefox thumb */
input[type='range']::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 9999px;
  background: #0ea5e9;
  border: 3px solid #ffffff;
  box-shadow: 0 1px 3px rgba(0,0,0,0.25);
}
.theme-light input[type='range']::-moz-range-thumb {
  background: #2563eb;
}

/* Terminal specific styles */
.xterm {
  @apply font-mono;
}

/* Đảm bảo các border và background phù hợp với border-radius */
.theme-light .card,
.theme-light .btn-primary,
.theme-light .btn-secondary,
.theme-light .btn-danger,
.theme-light .btn-success,
.theme-light .input-primary,
.theme-light .nav-item,
.theme-light .content-surface {
  position: relative;
  overflow: hidden;
}

/* Animation classes */
.animate-fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

.animate-slide-in {
  animation: slideIn 0.3s ease-out;
}

.animate-pulse-slow {
  animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Focus styles */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-dark-900;
}
.theme-light .focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 focus:ring-offset-blue-50;
}

/* Button variants */
.btn-primary {
  @apply px-4 py-2 rounded-lg transition-all duration-200 focus-ring shadow-glow;
  color: white;
  background: linear-gradient(180deg, rgba(14,165,233,1) 0%, rgba(2,132,199,1) 100%);
  box-shadow: 0 8px 20px rgba(14,165,233,0.25);
}

.theme-light .btn-primary {
  background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%);
  box-shadow: 0 4px 12px rgba(37,99,235,0.2);
}

.btn-primary:hover {
  filter: brightness(1.06);
}

.btn-primary:active {
  transform: translateY(1px);
}

.btn-secondary {
  @apply bg-dark-700 hover:bg-dark-600 px-4 py-2 rounded-lg transition-colors duration-200 focus-ring;
  color: white;
}
.theme-light .btn-secondary {
  color: #1d4ed8; /* blue-700 */
  background-color: #eff6ff; /* blue-50 */
  border: 2px solid rgba(14, 165, 233, 0.3);
  box-shadow: 0 2px 8px rgba(14, 165, 233, 0.1);
}
.theme-light .btn-secondary:hover {
  background-color: #dbeafe; /* blue-100 */
}

.btn-danger {
  @apply bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors duration-200 focus-ring;
  color: white;
}
.theme-light .btn-danger {
  background: linear-gradient(180deg, #ef4444 0%, #dc2626 100%);
  box-shadow: 0 4px 12px rgba(220,38,38,0.2);
}

.btn-success {
  @apply bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors duration-200 focus-ring;
  color: white;
}
.theme-light .btn-success {
  background: linear-gradient(180deg, #10b981 0%, #059669 100%);
  box-shadow: 0 4px 12px rgba(16,185,129,0.2);
}

/* Input styles */
.input-primary {
  @apply bg-dark-800 border border-dark-600 px-3 py-2 rounded-lg focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors duration-200;
  color: white;
}
.theme-light .input-primary {
  color: #1e40af; /* blue-800 */
  background-color: #ffffff;
  border: 2px solid rgba(14, 165, 233, 0.3);
  box-shadow: 0 2px 8px rgba(14, 165, 233, 0.1);
}
.theme-light .input-primary:focus {
  border-color: rgba(14, 165, 233, 0.6);
  box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.15);
}

/* Card styles */
.card {
  @apply bg-dark-800/70 border border-dark-700/70 rounded-xl shadow-lg backdrop-blur-sm;
}
.theme-light .card {
  background-color: rgba(255, 255, 255, 0.98);
  box-shadow: 0 6px 16px rgba(14, 165, 233, 0.15);
  border: 1px solid rgba(14, 165, 233, 0.3);
}

.card-hover {
  @apply hover:shadow-xl hover:shadow-primary-500/10 transition-all duration-300 hover:-translate-y-0.5;
}
.theme-light .card-hover:hover {
  box-shadow: 0 12px 24px rgba(14, 165, 233, 0.2);
}

/* Navigation items */
.nav-item {
  @apply w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 hover:bg-dark-700/80;
  color: #d1d5db; /* gray-300 */
}
.theme-light .nav-item {
  color: #3b82f6; /* blue-500 */
  background-color: transparent;
  border: 1px solid transparent;
  box-shadow: 0 1px 3px rgba(14, 165, 233, 0.05);
}
.theme-light .nav-item:hover {
  background-color: rgba(239, 246, 255, 0.8); /* blue-50 with opacity */
  color: #1d4ed8; /* blue-700 */
  border-color: rgba(14, 165, 233, 0.3);
  box-shadow: 0 2px 8px rgba(14, 165, 233, 0.1);
}

.nav-item-active {
  @apply bg-primary-600 shadow-glow;
  color: white;
}